(this["webpackJsonpe-commerce"]=this["webpackJsonpe-commerce"]||[]).push([[0],{14:function(e,t,a){e.exports=a(29)},19:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),n=a(12),l=a.n(n),c=(a(19),a(6)),i=a(1);var m=s.a.createContext({});var o=e=>{const t=t=>s.a.createElement(m.Consumer,null,a=>s.a.createElement(e,Object.assign({},t,{context:a})));return t.WrappedComponent=e,t};class d extends r.Component{constructor(e){super(e),this.handleChange=e=>this.setState({[e.target.name]:e.target.value,error:""}),this.login=()=>{const{username:e,password:t}=this.state;if(!e||!t)return this.setState({error:"Fill all fields!"});this.props.context.login(e,t)||this.setState({error:"Invalid Credentails"})},this.state={username:"",password:""}}render(){return this.props.context.user?s.a.createElement(i.a,{to:"/products"}):s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"hero is-primary "},s.a.createElement("div",{className:"hero-body container"},s.a.createElement("h4",{className:"title"},"Login"))),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"columns is-mobile is-centered"},s.a.createElement("div",{className:"column is-one-third"},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"User Name: "),s.a.createElement("input",{className:"input",type:"text",name:"username",onChange:this.handleChange})),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Password: "),s.a.createElement("input",{className:"input",type:"password",name:"password",onChange:this.handleChange})),this.state.error&&s.a.createElement("div",{className:"has-text-danger"},this.state.error),s.a.createElement("div",{className:"field is-clearfix"},s.a.createElement("button",{className:"button is-primary is-outlined is-pulled-right",onClick:this.login},"Submit")))))}}var u=o(d);var h=e=>{const{product:t}=e;return s.a.createElement("div",{className:" column is-half"},s.a.createElement("div",{className:"box"},s.a.createElement("div",{className:"media"},s.a.createElement("div",{className:"media-left"},s.a.createElement("figure",{className:"image is-64x64"},s.a.createElement("img",{src:"https://bulma.io/images/placeholders/128x128.png",alt:"product"}))),s.a.createElement("div",{className:"media-content"},s.a.createElement("b",{style:{textTransform:"capitalize"}},t.name," ",s.a.createElement("span",{className:"tag is-primary"},t.price,"RON")),s.a.createElement("div",null,t.shortDesc),t.stock>0?s.a.createElement("small",null,t.stock+" Available"):s.a.createElement("small",{className:"has-text-danger"},"Out Of Stock"),s.a.createElement("div",{className:"is-clearfix"},s.a.createElement("button",{className:"button is-small is-outlined is-primary   is-pulled-right",onClick:()=>e.addToCart({id:t.name,product:t,amount:1})},"Add to Cart"))))))};var p=o(e=>{const{products:t}=e.context;return s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"hero is-primary"},s.a.createElement("div",{className:"hero-body container"},s.a.createElement("h4",{className:"title"},"Our Products"))),s.a.createElement("br",null),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"column columns is-multiline"},t&&t.length?t.map((t,a)=>s.a.createElement(h,{product:t,key:a,addToCart:e.context.addToCart})):s.a.createElement("div",{className:"column"},s.a.createElement("span",{className:"title has-text-grey-light"},"No product found!")))))});const E={name:"",price:"",stock:"",shortDesc:"",description:""};class v extends r.Component{constructor(e){super(e),this.save=e=>{e.preventDefault();const{name:t,price:a,stock:r,shortDesc:s,description:n}=this.state;t&&a?this.props.context.addProduct({name:t,price:a,shortDesc:s,description:n,stock:r||0},()=>this.setState(E)):this.setState({error:"Please Enter name and price"})},this.handleChange=e=>this.setState({[e.target.name]:e.target.value,error:""}),this.state=E}render(){const{name:e,price:t,stock:a,shortDesc:n,description:l}=this.state,{user:c}=this.props.context;return c&&c.accessLevel<1?s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"hero is-primary "},s.a.createElement("div",{className:"hero-body container"},s.a.createElement("h4",{className:"title"},"Login"))),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("form",{onSubmit:this.save},s.a.createElement("div",{className:"columns is-mobile is-centered"},s.a.createElement("div",{className:"column is-one-third"},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Product Name: "),s.a.createElement("input",{className:"input",type:"text",name:"name",value:e,onChange:this.handleChange,required:!0})),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Price: "),s.a.createElement("input",{className:"input",type:"number",name:"price",value:t,onChange:this.handleChange,required:!0})),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Available in Stock: "),s.a.createElement("input",{className:"input",type:"number",name:"stock",value:a,onChange:this.handleChange})),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Short Description: "),s.a.createElement("input",{className:"input",type:"text",name:"shortDesc",value:n,onChange:this.handleChange})),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Description: "),s.a.createElement("textarea",{className:"textarea",type:"text",rows:"2",style:{resize:"none"},name:"description",value:l,onChange:this.handleChange})),this.state.error&&s.a.createElement("div",{className:"error"},this.state.error),s.a.createElement("div",{className:"field is-clearfix"},s.a.createElement("button",{className:"button is-primary is-outlined is-pulled-right",type:"submit",onClick:this.save},"Submit")))))):s.a.createElement(i.a,{to:"/"})}}var N=o(v);var g=e=>{const{cartItem:t,cartKey:a}=e,{product:r,amount:n}=t;return s.a.createElement("div",{className:" column is-half"},s.a.createElement("div",{className:"box"},s.a.createElement("div",{className:"media"},s.a.createElement("div",{className:"media-left"},s.a.createElement("figure",{className:"image is-64x64"},s.a.createElement("img",{src:"https://bulma.io/images/placeholders/128x128.png",alt:"product"}))),s.a.createElement("div",{className:"media-content"},s.a.createElement("b",{style:{textTransform:"capitalize"}},r.name," ",s.a.createElement("span",{className:"tag is-primary"},"$",r.price)),s.a.createElement("div",null,r.shortDesc),s.a.createElement("small",null,"".concat(n," in cart"))),s.a.createElement("div",{className:"media-right",onClick:()=>e.removeFromCart(a)},s.a.createElement("span",{className:"delete is-large"})))))};var b=o(e=>{const{cart:t}=e.context,a=Object.keys(t||{});return s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"hero is-primary"},s.a.createElement("div",{className:"hero-body container"},s.a.createElement("h4",{className:"title"},"My Cart"))),s.a.createElement("br",null),s.a.createElement("div",{className:"container"},a.length?s.a.createElement("div",{className:"column columns is-multiline"},a.map(a=>s.a.createElement(g,{cartKey:a,key:a,cartItem:t[a],removeFromCart:e.context.removeFromCart})),s.a.createElement("div",{className:"column is-12 is-clearfix"},s.a.createElement("br",null),s.a.createElement("div",{className:"is-pulled-right"},s.a.createElement("button",{onClick:e.context.clearCart,className:"button is-warning "},"Clear cart")," ",s.a.createElement("button",{className:"button is-success",onClick:e.context.checkout},"Checkout")))):s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"title has-text-grey-light"},"No item in cart!"))))}),C={users:[{username:"regular",accessLevel:1,password:"password"},{username:"admin",accessLevel:0,password:"password"}],initProducts:[{name:"Placa Video Nvidia RTX 3060 TI",stock:9,price:2749.99,shortDesc:" Memory Size: 8 GB | Memory Type: GDDR6 |  Bandwidth 448.0 GB/s .",description:"Placa video de performanta intalta, adapta pentru a juca cele mai ravnite titluri de ultimul moment Entry lvl pentru randare in 1440p"},{name:"Procesor AMD Ryzen 7 5800X3D",stock:10,price:1759.99,shortDesc:"Procesor de ultima generatie, 8 CORES | 16 THREADS",description:""}]};class f extends r.Component{constructor(e){super(e),this.login=(e,t)=>{let a=C.users.find(a=>a.username===e&&a.password===t);return!!a&&(this.setState({user:a}),localStorage.setItem("user",JSON.stringify(a)),!0)},this.logout=e=>{e.preventDefault(),this.setState({user:null}),localStorage.removeItem("user")},this.addProduct=(e,t)=>{let a=this.state.products.slice();a.push(e),localStorage.setItem("products",JSON.stringify(a)),this.setState({products:a},()=>t&&t())},this.addToCart=e=>{let t=this.state.cart;t[e.id]?t[e.id].amount+=e.amount:t[e.id]=e,t[e.id].amount>t[e.id].product.stock&&(t[e.id].amount=t[e.id].product.stock),localStorage.setItem("cart",JSON.stringify(t)),this.setState({cart:t})},this.checkout=()=>{if(!this.state.user)return void this.routerRef.current.history.push("/login");const e=this.state.cart,t=this.state.products.map(t=>(e[t.name]&&(t.stock=t.stock-e[t.name].amount),t));this.setState({products:t}),this.clearCart()},this.removeFromCart=e=>{let t=this.state.cart;delete t[e],localStorage.setItem("cart",JSON.stringify(t)),this.setState({cart:t})},this.clearCart=()=>{let e={};localStorage.setItem("cart",JSON.stringify(e)),this.setState({cart:e})},this.state={user:null,cart:{},products:[]},this.routerRef=s.a.createRef()}componentDidMount(){let e=localStorage.getItem("products"),t=localStorage.getItem("cart"),a=localStorage.getItem("user");e=e?JSON.parse(e):C.initProducts,t=t?JSON.parse(t):{},a=a?JSON.parse(a):null,this.setState({products:e,user:a,cart:t})}render(){return s.a.createElement(m.Provider,{value:{...this.state,removeFromCart:this.removeFromCart,addToCart:this.addToCart,login:this.login,addProduct:this.addProduct,clearCart:this.clearCart,checkout:this.checkout}},s.a.createElement(c.a,{ref:this.routerRef},s.a.createElement("div",{className:"App"},s.a.createElement("nav",{className:"navbar container",role:"navigation","aria-label":"main navigation"},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement("b",{className:"navbar-item is-size-4 "},"Den Store"),s.a.createElement("a",{href:"/",role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:e=>{e.preventDefault(),this.setState({showMenu:!this.state.showMenu})}},s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}))),s.a.createElement("div",{className:"navbar-menu ".concat(this.state.showMenu?"is-active":"")},s.a.createElement(c.b,{to:"/products",className:"navbar-item"},"Products"),this.state.user&&this.state.user.accessLevel<1&&s.a.createElement(c.b,{to:"/add-product",className:"navbar-item"},"Add Product"),s.a.createElement(c.b,{to:"/cart",className:"navbar-item"},"Cart",s.a.createElement("span",{className:"tag is-primary",style:{marginLeft:"5px"}},Object.keys(this.state.cart).length)),this.state.user?s.a.createElement("a",{href:"/",className:"navbar-item",onClick:this.logout},"Logout"):s.a.createElement(c.b,{to:"/login",className:"navbar-item"},"Login"))),s.a.createElement(i.d,null,s.a.createElement(i.b,{exact:!0,path:"/",component:p}),s.a.createElement(i.b,{exact:!0,path:"/login",component:u}),s.a.createElement(i.b,{exact:!0,path:"/cart",component:b}),s.a.createElement(i.b,{exact:!0,path:"/add-product",component:N}),s.a.createElement(i.b,{exact:!0,path:"/products",component:p})))))}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(28);l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[14,1,2]]]);
//# sourceMappingURL=main.faa378db.chunk.js.map